<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ineapir">
<title>Tips • ineapir</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tips">
<meta property="og:description" content="ineapir">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ineapir</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/filter_data_shortcuts.html">How to filter data using shortcut names</a>
    <a class="dropdown-item" href="../articles/filter_data.html">How to filter data</a>
    <a class="dropdown-item" href="../articles/identify_codes.html">How to identify the codes of tables and series on the INE website</a>
    <a class="dropdown-item" href="../articles/tips.html">Tips</a>
    <a class="dropdown-item" href="../articles/usage.html">Usage examples</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/inedifusion/ineapir/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Tips</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/inedifusion/ineapir/blob/HEAD/vignettes/articles/tips.Rmd" class="external-link"><code>vignettes/articles/tips.Rmd</code></a></small>
      <div class="d-none name"><code>tips.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="use-of-verbose">Use of <code>verbose</code><a class="anchor" aria-label="anchor" href="#use-of-verbose"></a>
</h2>
<p>When the argument <code>verbose = TRUE</code> is passed to a
function, a number of information is displayed in the console, including
the URL used to call the API.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/inedifusion/ineapir" class="external-link">ineapir</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Variables used in the operation IPC and verbose = TRUE</span></span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_variables.html">get_metadata_variables</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Check lang: OK</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/OPERACIONES_DISPONIBLES?page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/OPERACIONES_DISPONIBLES?page=2</span></span>
<span><span class="co">#&gt; - Check operation: OK</span></span>
<span><span class="co">#&gt; - Check page: OK</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VARIABLES_OPERACION/IPC?page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VARIABLES_OPERACION/IPC?page=2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-of-validate">Use of <code>validate</code><a class="anchor" aria-label="anchor" href="#use-of-validate"></a>
</h2>
<p>If it is not necessary to validate the values of the arguments passed
to a function, this validation can be turned off with
<code>validate = FALSE</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Variables used in the operation IPC with verbose = TRUE and validate = FALSE</span></span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_variables.html">get_metadata_variables</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                    validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VARIABLES_OPERACION/IPC?page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VARIABLES_OPERACION/IPC?page=2</span></span></code></pre></div>
<p>This is useful when we are filtering data and the filter we are using
is the one we want. Turning off validation means making fewer API calls.
For better performance, it is recommended to use codes in the filter
instead of shortcuts and disable validation if we are sure that the
filter is correct.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The filter </span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"115"</span> <span class="op">=</span> <span class="st">"2"</span>,     <span class="co"># variable id = 115, value id = 2</span></span>
<span>               <span class="st">"3"</span> <span class="op">=</span> <span class="st">"74"</span> ,     <span class="co"># variable id = 3, value id = 74</span></span>
<span>               <span class="st">"762"</span> <span class="op">=</span> <span class="st">"304092"</span> <span class="co"># variable id = 762, value id = 304092</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter with verbose = TRUE and validate = TRUE</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_series_filter.html">get_data_series_filter</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, filter <span class="op">=</span> <span class="va">filter</span>, periodicity <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                       verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Check lang: OK</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/OPERACIONES_DISPONIBLES?page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/OPERACIONES_DISPONIBLES?page=2</span></span>
<span><span class="co">#&gt; - Check operation: OK</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VARIABLES_OPERACION/IPC?page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VARIABLES_OPERACION/IPC?page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/3/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/3/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/70/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/70/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/115/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/115/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/269/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/269/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/270/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/270/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/349/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/349/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/544/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/544/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/762/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/762/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/763/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/763/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/764/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/764/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/765/IPC?det=0&amp;page=1</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/VALORES_VARIABLEOPERACION/765/IPC?det=0&amp;page=2</span></span>
<span><span class="co">#&gt; - Check filter: OK</span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/PERIODICIDAD_OPERACION/IPC</span></span>
<span><span class="co">#&gt; - Check periodicity: OK</span></span>
<span><span class="co">#&gt; - Check nlast: OK</span></span>
<span><span class="co">#&gt; - Check det: OK</span></span>
<span><span class="co">#&gt; - Check page: OK</span></span>
<span><span class="co">#&gt; - Processing filter: 0% - Processing filter: 67%        - Processing filter: 83%        - Processing filter: 100%        - Processing filter: 100%         </span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/DATOS_METADATAOPERACION/IPC?p=1&amp;nult=1&amp;det=0&amp;page=1&amp;g1=115%3A2&amp;g2=3%3A74&amp;g3=762%3A304092</span></span>
<span></span>
<span><span class="co"># Request data using the filter with verbose = TRUE and validate = FALSE</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_series_filter.html">get_data_series_filter</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, filter <span class="op">=</span> <span class="va">filter</span>, periodicity <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                       verbose <span class="op">=</span> <span class="cn">TRUE</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Processing filter: 0% - Processing filter: 67%        - Processing filter: 83%        - Processing filter: 100%        - Processing filter: 100%         </span></span>
<span><span class="co">#&gt; - API URL: https://servicios.ine.es/wstempus/js/ES/DATOS_METADATAOPERACION/IPC?p=1&amp;nult=1&amp;det=0&amp;page=1&amp;g1=115%3A2&amp;g2=3%3A74&amp;g3=762%3A304092</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-of-lang">Use of <code>lang</code><a class="anchor" aria-label="anchor" href="#use-of-lang"></a>
</h2>
<p>It is possible to retrieve information in English passing the
argument <code>lang = "EN"</code> to certain functions.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Variables used in the operation IPC and lang = "EN"</span></span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_variables.html">get_metadata_variables</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, lang <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span></span>
<span><span class="va">variables</span></span>
<span><span class="co">#&gt;     Id                            Nombre Codigo</span></span>
<span><span class="co">#&gt; 1    3                      Type of data       </span></span>
<span><span class="co">#&gt; 2   70 Autonomous Communities and Cities   CCAA</span></span>
<span><span class="co">#&gt; 3  115                         Provinces   PROV</span></span>
<span><span class="co">#&gt; 4  269               Special groups 2001       </span></span>
<span><span class="co">#&gt; 5  270                     Headings 2001       </span></span>
<span><span class="co">#&gt; 6  349                   Regional totals    NAC</span></span>
<span><span class="co">#&gt; 7  544            Correction of effects        </span></span>
<span><span class="co">#&gt; 8  762                    Grupos ECOICOP       </span></span>
<span><span class="co">#&gt; 9  763                 Subgrupos ECOICOP       </span></span>
<span><span class="co">#&gt; 10 764                    Clases ECOICOP       </span></span>
<span><span class="co">#&gt; 11 765                 Subclases ECOICOP</span></span></code></pre></div>
<p>We can use the English language as well filtering data using
shortcuts.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter with the values wrapper (CPI)</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"annual change"</span> , <span class="st">"overall index"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter with shortcut = TRUE and lang = "EN"</span></span>
<span><span class="va">cpi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">50902</span>, filter <span class="op">=</span> <span class="va">filter</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      tip <span class="op">=</span> <span class="st">"A"</span>, nlast <span class="op">=</span> <span class="fl">5</span>, lang <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cpi</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"T3_Periodo"</span>, <span class="st">"Anyo"</span>, <span class="st">"Valor"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                                                     Nombre</span></span>
<span><span class="co">#&gt; 1   National Total. Overall index. Annual variation (for monthly series). </span></span>
<span><span class="co">#&gt; 1.1 National Total. Overall index. Annual variation (for monthly series). </span></span>
<span><span class="co">#&gt; 1.2 National Total. Overall index. Annual variation (for monthly series). </span></span>
<span><span class="co">#&gt; 1.3 National Total. Overall index. Annual variation (for monthly series). </span></span>
<span><span class="co">#&gt; 1.4 National Total. Overall index. Annual variation (for monthly series). </span></span>
<span><span class="co">#&gt;     T3_Periodo Anyo Valor</span></span>
<span><span class="co">#&gt; 1          M04 2024   3.3</span></span>
<span><span class="co">#&gt; 1.1        M03 2024   3.2</span></span>
<span><span class="co">#&gt; 1.2        M02 2024   2.8</span></span>
<span><span class="co">#&gt; 1.3        M01 2024   3.4</span></span>
<span><span class="co">#&gt; 1.4        M12 2023   3.1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-of-unnest">Use of <code>unnest</code><a class="anchor" aria-label="anchor" href="#use-of-unnest"></a>
</h2>
<p>When we request data from tables or series using the functions
<code><a href="../reference/get_data_table.html">get_data_table()</a></code>, <code><a href="../reference/get_data_series.html">get_data_series()</a></code> and
<code>get_data_series_filter</code>, the <code>$Data</code> column
containing the data values is a list of data frames, one for each
entry.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter with the values wrapper (CPI)</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"variación anual"</span> , <span class="st">"variación mensual"</span>, <span class="st">"índice general"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter and unnest = FALSE</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">50902</span>, filter <span class="op">=</span> <span class="va">filter</span>, tip <span class="op">=</span> <span class="st">"A"</span>, nlast <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We have two entries</span></span>
<span> <span class="va">ipc</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"COD"</span>,<span class="st">"Nombre"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;         COD                                              Nombre</span></span>
<span><span class="co">#&gt; 1 IPC251855 Total Nacional. Índice general. Variación mensual. </span></span>
<span><span class="co">#&gt; 2 IPC251856   Total Nacional. Índice general. Variación anual.</span></span>
<span> </span>
<span><span class="co"># Data column is a list of two data frames. One for each entry. </span></span>
<span> <span class="va">ipc</span><span class="op">$</span><span class="va">Data</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;                           Fecha T3_TipoDato T3_Periodo Anyo Valor</span></span>
<span><span class="co">#&gt; 1 2024-04-01T00:00:00.000+02:00      Avance        M04 2024   0.7</span></span>
<span><span class="co">#&gt; 2 2024-03-01T00:00:00.000+01:00  Definitivo        M03 2024   0.8</span></span>
<span><span class="co">#&gt; 3 2024-02-01T00:00:00.000+01:00  Definitivo        M02 2024   0.4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt;                           Fecha T3_TipoDato T3_Periodo Anyo Valor</span></span>
<span><span class="co">#&gt; 1 2024-04-01T00:00:00.000+02:00      Avance        M04 2024   3.3</span></span>
<span><span class="co">#&gt; 2 2024-03-01T00:00:00.000+01:00  Definitivo        M03 2024   3.2</span></span>
<span><span class="co">#&gt; 3 2024-02-01T00:00:00.000+01:00  Definitivo        M02 2024   2.8</span></span></code></pre></div>
<p>If we want to get only one data frame for all data values, we can
pass the argument <code>unnest = TRUE</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter with the values wrapper (CPI)</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"variación anual"</span> , <span class="st">"variación mensual"</span>, <span class="st">"índice general"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter and unnest = TRUE</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">50902</span>, filter <span class="op">=</span> <span class="va">filter</span>, tip <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>                      nlast <span class="op">=</span> <span class="fl">3</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Unique data frame with 6 rows</span></span>
<span><span class="va">ipc</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"T3_Periodo"</span>, <span class="st">"Anyo"</span>, <span class="st">"Valor"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                                  Nombre T3_Periodo Anyo Valor</span></span>
<span><span class="co">#&gt; 1   Total Nacional. Índice general. Variación mensual.         M04 2024   0.7</span></span>
<span><span class="co">#&gt; 1.1 Total Nacional. Índice general. Variación mensual.         M03 2024   0.8</span></span>
<span><span class="co">#&gt; 1.2 Total Nacional. Índice general. Variación mensual.         M02 2024   0.4</span></span>
<span><span class="co">#&gt; 2     Total Nacional. Índice general. Variación anual.         M04 2024   3.3</span></span>
<span><span class="co">#&gt; 2.1   Total Nacional. Índice general. Variación anual.         M03 2024   3.2</span></span>
<span><span class="co">#&gt; 2.2   Total Nacional. Índice general. Variación anual.         M02 2024   2.8</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-of-metanames-and-metacodes">Use of <code>metanames</code> and <code>metacodes</code><a class="anchor" aria-label="anchor" href="#use-of-metanames-and-metacodes"></a>
</h2>
<p>When we pass the argument <code>metanames = TRUE</code> we get
additional columns that contain the names of the values extracted from
the metadata information. To get additional columns containing the codes
and ids of the values extracted from the metadata information we pass
the argument <code>metacodes = TRUE</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for total population of men and women </span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nacionalidad <span class="op">=</span> <span class="st">"total"</span>, sexo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hombres"</span>, <span class="st">"mujeres"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Table: Resident population by date, sex, age group and nationality</span></span>
<span><span class="va">poblacion</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">9674</span>, filter <span class="op">=</span> <span class="va">filter</span>, validate <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                            tip <span class="op">=</span> <span class="st">"AM"</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>, nlast <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co"># Names of columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">poblacion</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="co"># Request data with metanames = TRUE</span></span>
<span><span class="va">poblacion</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">9674</span>, filter <span class="op">=</span> <span class="va">filter</span>, validate <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                            tip <span class="op">=</span> <span class="st">"AM"</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>, nlast <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                            metanames <span class="op">=</span>  <span class="cn">TRUE</span>, metacodes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span></span>
<span><span class="co"># Additional columns of Nacionalidad, Edad and Sexo</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">poblacion</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="filtering-with-regular-expresions">Filtering with regular expresions<a class="anchor" aria-label="anchor" href="#filtering-with-regular-expresions"></a>
</h2>
<p>When we use shortcuts names in the filter, we can also include as
values regular expressions if this helps us filter the data better.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter with a regular expression for ages between 20 and 25 years old</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sexo <span class="op">=</span> <span class="st">"total"</span>, edad <span class="op">=</span> <span class="st">"2[0-5]+"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter with a regular expression</span></span>
<span><span class="va">pob</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">56934</span>, filter <span class="op">=</span> <span class="va">filter</span>, tip <span class="op">=</span> <span class="st">"A"</span>, nlast <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                      unnest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Only ages between 20 and 25 years old</span></span>
<span><span class="va">pob</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"Anyo"</span>, <span class="st">"Valor"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                                Nombre Anyo  Valor</span></span>
<span><span class="co">#&gt; 1 Total Nacional. 20 años. Total. Población. Número.  2023 499051</span></span>
<span><span class="co">#&gt; 2 Total Nacional. 21 años. Total. Población. Número.  2023 500702</span></span>
<span><span class="co">#&gt; 3 Total Nacional. 22 años. Total. Población. Número.  2023 508918</span></span>
<span><span class="co">#&gt; 4 Total Nacional. 23 años. Total. Población. Número.  2023 501369</span></span>
<span><span class="co">#&gt; 5 Total Nacional. 24 años. Total. Población. Número.  2023 492950</span></span>
<span><span class="co">#&gt; 6 Total Nacional. 25 años. Total. Población. Número.  2023 504965</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Crespo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
