<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How to filter data • ineapir</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to filter data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ineapir</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/classifications.html">Classifications and hierarchy trees</a></li>
    <li><a class="dropdown-item" href="../articles/filter_data_shortcuts.html">How to filter data using shortcut names</a></li>
    <li><a class="dropdown-item" href="../articles/filter_data.html">How to filter data</a></li>
    <li><a class="dropdown-item" href="../articles/identify_codes.html">How to identify the codes of tables and series on the INE website</a></li>
    <li><a class="dropdown-item" href="../articles/tips.html">Tips</a></li>
    <li><a class="dropdown-item" href="../articles/usage.html">Usage examples</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/es-ine/ineapir/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How to filter data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/es-ine/ineapir/blob/main/vignettes/articles/filter_data.Rmd" class="external-link"><code>vignettes/articles/filter_data.Rmd</code></a></small>
      <div class="d-none name"><code>filter_data.Rmd</code></div>
    </div>

    
    
<p>When we request data from tables or series there is the possibility
of filtering data on the fly using metadata information about the
variables and their values that define the series.</p>
<div class="section level2">
<h2 id="filtering-data-from-tables">Filtering data from tables<a class="anchor" aria-label="anchor" href="#filtering-data-from-tables"></a>
</h2>
<p>It is necessary to pass the argument <code>filter</code> of the
<code><a href="../reference/get_data_table.html">get_data_table()</a></code> function, which is a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>
of variables and the values they take. There are two approaches to build
the filter depending on the table type.</p>
<div class="section level3">
<h3 id="case-one-">Case one.<a class="anchor" aria-label="anchor" href="#case-one-"></a>
</h3>
<ul>
<li>
<strong>URL:</strong> <a href="https://www.ine.es/jaxiT3/Tabla.htm?t=50902" class="external-link uri">https://www.ine.es/jaxiT3/Tabla.htm?t=50902</a>
</li>
</ul>
<ol style="list-style-type: decimal">
<li>The first step is to obtain the values of the groups (combo boxes)
of the table that interest us to build the filter.</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/es-ine/ineapir" class="external-link">ineapir</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get metadata information of the table</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_table_varval.html">get_metadata_table_varval</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">50902</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">metadata</span>,<span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;       Id Fk_Variable                             Nombre Codigo</span></span>
<span><span class="co">#&gt; 1 304092         762                     Índice general     00</span></span>
<span><span class="co">#&gt; 2 304093         762 Alimentos y bebidas no alcohólicas     01</span></span>
<span><span class="co">#&gt; 3 304094         762       Bebidas alcohólicas y tabaco     02</span></span>
<span><span class="co">#&gt; 4 304095         762                  Vestido y calzado     03</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">metadata</span>,<span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Id Fk_Variable                        Nombre Codigo</span></span>
<span><span class="co">#&gt; 14 83           3                        Índice      0</span></span>
<span><span class="co">#&gt; 15 84           3             Variación mensual      1</span></span>
<span><span class="co">#&gt; 16 74           3               Variación anual      2</span></span>
<span><span class="co">#&gt; 17 87           3 Variación en lo que va de año      5</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>With this information we build the filter as follows.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The filter is a list()</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"3"</span> <span class="op">=</span> <span class="st">"74"</span> ,     <span class="co"># variable id = 3, value id = 74</span></span>
<span>               <span class="st">"762"</span> <span class="op">=</span> <span class="st">"304092"</span> <span class="co"># variable id = 762, value id = 304092</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">50902</span>, filter <span class="op">=</span> <span class="va">filter</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      tip <span class="op">=</span> <span class="st">"A"</span>, nlast <span class="op">=</span> <span class="fl">5</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ipc</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"T3_Periodo"</span>, <span class="st">"Anyo"</span>, <span class="st">"Valor"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                                Nombre T3_Periodo Anyo Valor</span></span>
<span><span class="co">#&gt; 1   Total Nacional. Índice general. Variación anual.         M06 2025   2.2</span></span>
<span><span class="co">#&gt; 1.1 Total Nacional. Índice general. Variación anual.         M05 2025   2.0</span></span>
<span><span class="co">#&gt; 1.2 Total Nacional. Índice general. Variación anual.         M04 2025   2.2</span></span>
<span><span class="co">#&gt; 1.3 Total Nacional. Índice general. Variación anual.         M03 2025   2.3</span></span>
<span><span class="co">#&gt; 1.4 Total Nacional. Índice general. Variación anual.         M02 2025   3.0</span></span></code></pre></div>
<ul>
<li>
<strong>NOTE</strong> If we add a minus sign to a value, the value
will be excluded from the filter.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The filter is a list()</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"3"</span> <span class="op">=</span> <span class="st">"74"</span> ,     <span class="co"># variable id = 3, value id = 74</span></span>
<span>               <span class="st">"762"</span> <span class="op">=</span> <span class="st">"-304092"</span> <span class="co"># variable id = 762, value id = 304092</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">50902</span>, filter <span class="op">=</span> <span class="va">filter</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      tip <span class="op">=</span> <span class="st">"A"</span>, nlast <span class="op">=</span> <span class="fl">2</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ipc</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"T3_Periodo"</span>, <span class="st">"Anyo"</span>, <span class="st">"Valor"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                                                                                                   Nombre</span></span>
<span><span class="co">#&gt; 1                                                  Total Nacional. Alimentos y bebidas no alcohólicas. Variación anual. </span></span>
<span><span class="co">#&gt; 2                                                        Total Nacional. Bebidas alcohólicas y tabaco. Variación anual. </span></span>
<span><span class="co">#&gt; 3                                                                   Total Nacional. Vestido y calzado. Variación anual. </span></span>
<span><span class="co">#&gt; 4                              Total Nacional. Vivienda, agua, electricidad, gas y otros combustibles. Variación anual. </span></span>
<span><span class="co">#&gt; 5  Total Nacional. Muebles, artículos del hogar y artículos para el mantenimiento corriente del hogar. Variación anual. </span></span>
<span><span class="co">#&gt; 6                                                                             Total Nacional. Sanidad. Variación anual. </span></span>
<span><span class="co">#&gt; 7                                                                          Total Nacional. Transporte. Variación anual. </span></span>
<span><span class="co">#&gt; 8                                                                      Total Nacional. Comunicaciones. Variación anual. </span></span>
<span><span class="co">#&gt; 9                                                                      Total Nacional. Ocio y cultura. Variación anual. </span></span>
<span><span class="co">#&gt; 10                                                                          Total Nacional. Enseñanza. Variación anual. </span></span>
<span><span class="co">#&gt; 11                                                             Total Nacional. Restaurantes y hoteles. Variación anual. </span></span>
<span><span class="co">#&gt; 12                                                           Total Nacional. Otros bienes y servicios. Variación anual. </span></span>
<span><span class="co">#&gt;    T3_Periodo Anyo Valor</span></span>
<span><span class="co">#&gt; 1         M05 2025   2.5</span></span>
<span><span class="co">#&gt; 2         M05 2025   3.6</span></span>
<span><span class="co">#&gt; 3         M05 2025   0.5</span></span>
<span><span class="co">#&gt; 4         M05 2025   3.8</span></span>
<span><span class="co">#&gt; 5         M05 2025   0.6</span></span>
<span><span class="co">#&gt; 6         M05 2025   1.9</span></span>
<span><span class="co">#&gt; 7         M05 2025  -2.0</span></span>
<span><span class="co">#&gt; 8         M05 2025   2.0</span></span>
<span><span class="co">#&gt; 9         M05 2025   0.5</span></span>
<span><span class="co">#&gt; 10        M05 2025   2.5</span></span>
<span><span class="co">#&gt; 11        M05 2025   4.3</span></span>
<span><span class="co">#&gt; 12        M05 2025   3.6</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-two-pc-axis-file">Case two (pc-axis file)<a class="anchor" aria-label="anchor" href="#case-two-pc-axis-file"></a>
</h3>
<ul>
<li>
<strong>URL:</strong> <a href="https://www.ine.es/jaxi/Tabla.htm?path=/t20/e245/p08/l0/&amp;file=01001.px" class="external-link uri">https://www.ine.es/jaxi/Tabla.htm?path=/t20/e245/p08/l0/&amp;file=01001.px</a>
</li>
</ul>
<ol style="list-style-type: decimal">
<li>The first step is to obtain the metadata information from a
table.</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get metadata information of the table</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_table_varval.html">get_metadata_table_varval</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="st">"t20/e245/p08/l0/01001.px"</span><span class="op">)</span></span>
<span><span class="va">metadata</span></span>
<span><span class="co">#&gt;            Nombre        Codigo         Variable.Nombre      Variable.Codigo</span></span>
<span><span class="co">#&gt; 1    TOTAL EDADES   totaledades edad (3 grupos de edad)    edad3gruposdeedad</span></span>
<span><span class="co">#&gt; 2           TOTAL         total   Españoles/Extranjeros espanolesextranjeros</span></span>
<span><span class="co">#&gt; 3     Ambos sexos    ambossexos                    Sexo                 sexo</span></span>
<span><span class="co">#&gt; 6         Hombres       hombres                    Sexo                 sexo</span></span>
<span><span class="co">#&gt; 9         Mujeres       mujeres                    Sexo                 sexo</span></span>
<span><span class="co">#&gt; 11      Españoles     espanoles   Españoles/Extranjeros espanolesextranjeros</span></span>
<span><span class="co">#&gt; 20    Extranjeros   extranjeros   Españoles/Extranjeros espanolesextranjeros</span></span>
<span><span class="co">#&gt; 29  % Extranjeros extranjeros~1   Españoles/Extranjeros espanolesextranjeros</span></span>
<span><span class="co">#&gt; 37      0-15 años       015anos edad (3 grupos de edad)    edad3gruposdeedad</span></span>
<span><span class="co">#&gt; 73     16-64 años      1664anos edad (3 grupos de edad)    edad3gruposdeedad</span></span>
<span><span class="co">#&gt; 109      65 y más        65ymas edad (3 grupos de edad)    edad3gruposdeedad</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># NOTE: for px tables we can use a filter.</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_table_varval.html">get_metadata_table_varval</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="st">"t20/e245/p08/l0/01001.px"</span>,</span>
<span>                                      filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sexo <span class="op">=</span> <span class="st">"ambossexos"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">metadata</span></span>
<span><span class="co">#&gt;           Nombre        Codigo         Variable.Nombre      Variable.Codigo</span></span>
<span><span class="co">#&gt; 1   TOTAL EDADES   totaledades edad (3 grupos de edad)    edad3gruposdeedad</span></span>
<span><span class="co">#&gt; 2          TOTAL         total   Españoles/Extranjeros espanolesextranjeros</span></span>
<span><span class="co">#&gt; 3    Ambos sexos    ambossexos                    Sexo                 sexo</span></span>
<span><span class="co">#&gt; 5      Españoles     espanoles   Españoles/Extranjeros espanolesextranjeros</span></span>
<span><span class="co">#&gt; 8    Extranjeros   extranjeros   Españoles/Extranjeros espanolesextranjeros</span></span>
<span><span class="co">#&gt; 11 % Extranjeros extranjeros~1   Españoles/Extranjeros espanolesextranjeros</span></span>
<span><span class="co">#&gt; 13     0-15 años       015anos edad (3 grupos de edad)    edad3gruposdeedad</span></span>
<span><span class="co">#&gt; 25    16-64 años      1664anos edad (3 grupos de edad)    edad3gruposdeedad</span></span>
<span><span class="co">#&gt; 37      65 y más        65ymas edad (3 grupos de edad)    edad3gruposdeedad</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>With this information we build the filter as follows.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build the filter with the codes of variables and values</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sexo <span class="op">=</span> <span class="st">"ambossexos"</span>,              </span>
<span>               espanolesextranjeros <span class="op">=</span> <span class="st">"total"</span>,   </span>
<span>               edad3gruposdeedad <span class="op">=</span> <span class="st">"totaledades"</span> </span>
<span>               <span class="op">)</span> </span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">poblacion</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="st">"t20/e245/p08/l0/01001.px"</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            tip <span class="op">=</span> <span class="st">"A"</span>, nlast <span class="op">=</span> <span class="fl">5</span>, filter <span class="op">=</span> <span class="va">filter</span>,</span>
<span>                            validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">poblacion</span></span>
<span><span class="co">#&gt;                             Nombre NombrePeriodo    Valor</span></span>
<span><span class="co">#&gt; 1 TOTAL EDADES, TOTAL, Ambos sexos          2022 47475420</span></span>
<span><span class="co">#&gt; 2 TOTAL EDADES, TOTAL, Ambos sexos          2021 47385107</span></span>
<span><span class="co">#&gt; 3 TOTAL EDADES, TOTAL, Ambos sexos          2020 47450795</span></span>
<span><span class="co">#&gt; 4 TOTAL EDADES, TOTAL, Ambos sexos          2019 47026208</span></span>
<span><span class="co">#&gt; 5 TOTAL EDADES, TOTAL, Ambos sexos          2018 46722980</span></span></code></pre></div>
<ul>
<li>
<strong>NOTE</strong> If we add a minus sign to a value, the value
will be excluded from the filter.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build the filter with the codes of variables and values</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sexo <span class="op">=</span> <span class="st">"-ambossexos"</span>,              </span>
<span>               espanolesextranjeros <span class="op">=</span> <span class="st">"total"</span>,   </span>
<span>               edad3gruposdeedad <span class="op">=</span> <span class="st">"totaledades"</span> </span>
<span>               <span class="op">)</span> </span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">poblacion</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="st">"t20/e245/p08/l0/01001.px"</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            tip <span class="op">=</span> <span class="st">"A"</span>, nlast <span class="op">=</span> <span class="fl">1</span>, filter <span class="op">=</span> <span class="va">filter</span>,</span>
<span>                            validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">poblacion</span></span>
<span><span class="co">#&gt;                         Nombre NombrePeriodo    Valor</span></span>
<span><span class="co">#&gt; 1 TOTAL EDADES, TOTAL, Hombres          2022 23265381</span></span>
<span><span class="co">#&gt; 2 TOTAL EDADES, TOTAL, Mujeres          2022 24210039</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-three-tpx-file">Case three (tpx file)<a class="anchor" aria-label="anchor" href="#case-three-tpx-file"></a>
</h3>
<ul>
<li>
<strong>URL:</strong> <a href="https://www.ine.es/jaxi/Tabla.htm?tpx=33387&amp;L=0" class="external-link uri">https://www.ine.es/jaxi/Tabla.htm?tpx=33387&amp;L=0</a>
</li>
</ul>
<ol style="list-style-type: decimal">
<li>The first step is to obtain the metadata information from a
table.</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get metadata information of the table</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_table_varval.html">get_metadata_table_varval</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">33387</span><span class="op">)</span></span>
<span><span class="va">metadata</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^\\d{1}\\D+"</span>,<span class="va">metadata</span><span class="op">$</span><span class="va">Codigo</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                                         Nombre</span></span>
<span><span class="co">#&gt; 2                                  1.  Biomasa</span></span>
<span><span class="co">#&gt; 29  2.  Minerales metálicos (mineral en bruto)</span></span>
<span><span class="co">#&gt; 50                  3.  Minerales no metálicos</span></span>
<span><span class="co">#&gt; 106                   4.  Combustibles fósiles</span></span>
<span><span class="co">#&gt;                                Codigo  Variable.Nombre Variable.Codigo</span></span>
<span><span class="co">#&gt; 2                            1biomasa tipo de material  tipodematerial</span></span>
<span><span class="co">#&gt; 29  2mineralesmetalicosmineralenbruto tipo de material  tipodematerial</span></span>
<span><span class="co">#&gt; 50              3mineralesnometalicos tipo de material  tipodematerial</span></span>
<span><span class="co">#&gt; 106              4combustiblesfosiles tipo de material  tipodematerial</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># NOTE: for tpx tables we can use a filter.</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_table_varval.html">get_metadata_table_varval</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">33387</span>,</span>
<span>                                      filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tipodematerial <span class="op">=</span> <span class="st">"1biomasa"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">metadata</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^\\d{1}\\D+"</span>,<span class="va">metadata</span><span class="op">$</span><span class="va">Codigo</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;        Nombre   Codigo  Variable.Nombre Variable.Codigo</span></span>
<span><span class="co">#&gt; 1 1.  Biomasa 1biomasa tipo de material  tipodematerial</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>With this information we build the filter as follows.</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build the filter with the codes of variables and values</span></span>
<span><span class="co"># A variable can take more than one value</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tipodematerial <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1biomasa"</span>, <span class="st">"2mineralesmetalicosmineralenbruto"</span>,</span>
<span>                                  <span class="st">"3mineralesnometalicos"</span>, <span class="st">"4combustiblesfosiles"</span><span class="op">)</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">materiales</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">33387</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>, tip <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>                             nlast <span class="op">=</span> <span class="fl">1</span>, filter <span class="op">=</span> <span class="va">filter</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">materiales</span></span>
<span><span class="co">#&gt;                                       Nombre NombrePeriodo     Valor</span></span>
<span><span class="co">#&gt; 1                                1.  Biomasa 2023 (avance) 107483869</span></span>
<span><span class="co">#&gt; 2 2.  Minerales metálicos (mineral en bruto) 2023 (avance)  23233159</span></span>
<span><span class="co">#&gt; 3                 3.  Minerales no metálicos 2023 (avance) 213294377</span></span>
<span><span class="co">#&gt; 4                   4.  Combustibles fósiles 2023 (avance)    110206</span></span></code></pre></div>
<ul>
<li>
<strong>NOTE</strong> If we add a minus sign to a value, the value
will be excluded from the filter.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build the filter with the codes of variables and values</span></span>
<span><span class="co"># A variable can take more than one value</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tipodematerial <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-1biomasa"</span>, <span class="st">"-2mineralesmetalicosmineralenbruto"</span>,</span>
<span>                                  <span class="st">"-3mineralesnometalicos"</span>, <span class="st">"-4combustiblesfosiles"</span><span class="op">)</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">materiales</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">33387</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>, tip <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>                             nlast <span class="op">=</span> <span class="fl">1</span>, filter <span class="op">=</span> <span class="va">filter</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">materiales</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        Nombre NombrePeriodo     Valor</span></span>
<span><span class="co">#&gt; 1         EXTRACCION NACIONAL 2023 (avance) 344121611</span></span>
<span><span class="co">#&gt; 2    1.1.  Cultivos primarios 2023 (avance)  52902520</span></span>
<span><span class="co">#&gt; 3            1.1.1.  Cereales 2023 (avance)        NA</span></span>
<span><span class="co">#&gt; 4 1.1.2.  Raices y tubérculos 2023 (avance)        NA</span></span>
<span><span class="co">#&gt; 5 1.1.3.  Cultivos azucareros 2023 (avance)        NA</span></span>
<span><span class="co">#&gt; 6         1.1.4.  Leguminosas 2023 (avance)        NA</span></span></code></pre></div>
<ul>
<li>
<strong>URL:</strong> <a href="https://www.ine.es/jaxi/Tabla.htm?tpx=52056&amp;L=0" class="external-link uri">https://www.ine.es/jaxi/Tabla.htm?tpx=52056&amp;L=0</a>
</li>
</ul>
<ol style="list-style-type: decimal">
<li>There are tpx tables that contain variable ids and value ids. We can
see that when we obtain the metadata information from a table.</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get metadata information of the table using a filter.</span></span>
<span><span class="co"># The filter is useful when the table contains a large number of series</span></span>
<span><span class="co"># (for example, tables with a large territorial segmentation) which slows down</span></span>
<span><span class="co"># the information retrieval.</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_table_varval.html">get_metadata_table_varval</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">52056</span>,</span>
<span>                                      filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>NAC <span class="op">=</span> <span class="st">"00"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">$</span><span class="va">Variable.Id</span><span class="op">)</span>,<span class="op">]</span>,<span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;       Id         Nombre Codigo Variable.Id Variable.Nombre Variable.Codigo</span></span>
<span><span class="co">#&gt; 6  11406 Valor absoluto                  3    Tipo de dato                </span></span>
<span><span class="co">#&gt; 12    77     Porcentaje                  3    Tipo de dato                </span></span>
<span><span class="co">#&gt; 4    451          Total                 18            Sexo                </span></span>
<span><span class="co">#&gt; 40   452        Hombres      1          18            Sexo</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>In this case, we can use the ids instead of the codes to build the
filter. To do this we add the alias <em>~id</em> at the end of each
id.</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># In order to use the ids of variables and values we add the alias '~id'</span></span>
<span><span class="va">filter</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"349~id"</span> <span class="op">=</span> <span class="st">"16473~id"</span>,  <span class="co"># variable id = 349, value id = 16473</span></span>
<span>              <span class="st">"916~id"</span> <span class="op">=</span> <span class="st">"391871~id"</span>, <span class="co"># variable id = 909, value id = 391455</span></span>
<span>              <span class="st">"942~id"</span> <span class="op">=</span> <span class="st">"274282~id"</span>, <span class="co"># variable id = 942, value id = 274282</span></span>
<span>              <span class="st">"999~id"</span> <span class="op">=</span> <span class="st">"391770~id"</span>, <span class="co"># variable id = 975, value id = 391438</span></span>
<span>              <span class="st">"3~id"</span>   <span class="op">=</span> <span class="st">"11406~id"</span>  <span class="co"># variable id = 3, value id = 11406</span></span>
<span>              <span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">explotaciones</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_table.html">get_data_table</a></span><span class="op">(</span>idTable <span class="op">=</span> <span class="fl">52056</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span>, tip <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>                             nlast <span class="op">=</span> <span class="fl">1</span>, filter <span class="op">=</span> <span class="va">filter</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">explotaciones</span></span>
<span><span class="co">#&gt;                                                                                          Nombre</span></span>
<span><span class="co">#&gt; 1   Total Nacional, Total tramos UTAT, Total mano de obra, Total, Explotaciones, Valor absoluto</span></span>
<span><span class="co">#&gt; 2 Total Nacional, Total tramos UTAT, Total mano de obra, Hombres, Explotaciones, Valor absoluto</span></span>
<span><span class="co">#&gt; 3 Total Nacional, Total tramos UTAT, Total mano de obra, Mujeres, Explotaciones, Valor absoluto</span></span>
<span><span class="co">#&gt;    Valor</span></span>
<span><span class="co">#&gt; 1 894718</span></span>
<span><span class="co">#&gt; 2 757886</span></span>
<span><span class="co">#&gt; 3 356571</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="filtering-data-from-series">Filtering data from series<a class="anchor" aria-label="anchor" href="#filtering-data-from-series"></a>
</h2>
<p>It is necessary to pass the argument <code>filter</code> of the
<code><a href="../reference/get_data_series_filter.html">get_data_series_filter()</a></code> function, which is a
<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> of variables and the values they take.</p>
<ol style="list-style-type: decimal">
<li>The first step is to obtain the variables used in the operation to
which the series belong.</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Variables used in the operation IPC</span></span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_variables.html">get_metadata_variables</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">variables</span></span>
<span><span class="co">#&gt;     Id                           Nombre Codigo</span></span>
<span><span class="co">#&gt; 1    3                     Tipo de dato       </span></span>
<span><span class="co">#&gt; 2   70 Comunidades y Ciudades Autónomas   CCAA</span></span>
<span><span class="co">#&gt; 3  115                       Provincias       </span></span>
<span><span class="co">#&gt; 4  269           Grupos especiales 2001       </span></span>
<span><span class="co">#&gt; 5  270                    Rúbricas 2001       </span></span>
<span><span class="co">#&gt; 6  349            Totales Territoriales    NAC</span></span>
<span><span class="co">#&gt; 7  544            Corrección de efectos       </span></span>
<span><span class="co">#&gt; 8  762                   Grupos ECOICOP       </span></span>
<span><span class="co">#&gt; 9  763                Subgrupos ECOICOP       </span></span>
<span><span class="co">#&gt; 10 764                   Clases ECOICOP       </span></span>
<span><span class="co">#&gt; 11 765                Subclases ECOICOP</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>The second step is to obtain the values of the variables that
interest us to build the filter.</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Values of the variable with id = 115</span></span>
<span><span class="va">provincias</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_values.html">get_metadata_values</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, variable <span class="op">=</span> <span class="fl">115</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">provincias</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Id Fk_Variable           Nombre Codigo FK_JerarquiaPadres</span></span>
<span><span class="co">#&gt; 1  2         115      Araba/Álava     01               9012</span></span>
<span><span class="co">#&gt; 2  3         115         Albacete     02               9004</span></span>
<span><span class="co">#&gt; 3  4         115 Alicante/Alacant     03               9006</span></span>
<span><span class="co">#&gt; 4  5         115          Almería     04               8997</span></span>
<span><span class="co">#&gt; 5  6         115            Ávila     05               9003</span></span>
<span><span class="co">#&gt; 6  7         115          Badajoz     06               9007</span></span>
<span></span>
<span><span class="co"># Values of the variable with id = 3</span></span>
<span><span class="va">tipo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_values.html">get_metadata_values</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, variable <span class="op">=</span> <span class="fl">3</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tipo</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Id Fk_Variable            Nombre Codigo</span></span>
<span><span class="co">#&gt; 1 72           3         Dato base       </span></span>
<span><span class="co">#&gt; 2 74           3   Variación anual       </span></span>
<span><span class="co">#&gt; 3 83           3            Índice       </span></span>
<span><span class="co">#&gt; 4 84           3 Variación mensual       </span></span>
<span><span class="co">#&gt; 5 85           3       Media anual      M</span></span>
<span><span class="co">#&gt; 6 86           3   Variación anual</span></span>
<span></span>
<span><span class="co"># Values of the variable with id = 762</span></span>
<span><span class="va">grupos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_values.html">get_metadata_values</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, variable <span class="op">=</span> <span class="fl">762</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">grupos</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;       Id Fk_Variable                             Nombre Codigo</span></span>
<span><span class="co">#&gt; 1 304092         762                     Índice general     00</span></span>
<span><span class="co">#&gt; 2 304093         762 Alimentos y bebidas no alcohólicas     01</span></span>
<span><span class="co">#&gt; 3 304094         762       Bebidas alcohólicas y tabaco     02</span></span>
<span><span class="co">#&gt; 4 304095         762                  Vestido y calzado     03</span></span>
<span><span class="co">#&gt;   FK_JerarquiaPadres</span></span>
<span><span class="co">#&gt; 1               NULL</span></span>
<span><span class="co">#&gt; 2             304092</span></span>
<span><span class="co">#&gt; 3             304092</span></span>
<span><span class="co">#&gt; 4             304092</span></span>
<span></span>
<span><span class="co"># We can get all the values at once with the function get_metadata_series_varval</span></span>
<span><span class="va">varval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata_series_varval.html">get_metadata_series_varval</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">varval</span>, <span class="va">Fk_Variable</span> <span class="op">==</span> <span class="fl">115</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Id Fk_Variable           Nombre Codigo</span></span>
<span><span class="co">#&gt; 33  2         115      Araba/Álava     01</span></span>
<span><span class="co">#&gt; 34  3         115         Albacete     02</span></span>
<span><span class="co">#&gt; 35  4         115 Alicante/Alacant     03</span></span>
<span><span class="co">#&gt; 36  5         115          Almería     04</span></span>
<span><span class="co">#&gt; 37  6         115            Ávila     05</span></span>
<span><span class="co">#&gt; 38  7         115          Badajoz     06</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">varval</span>, <span class="va">Fk_Variable</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Id Fk_Variable            Nombre Codigo</span></span>
<span><span class="co">#&gt; 1 72           3         Dato base       </span></span>
<span><span class="co">#&gt; 2 74           3   Variación anual       </span></span>
<span><span class="co">#&gt; 3 83           3            Índice       </span></span>
<span><span class="co">#&gt; 4 84           3 Variación mensual       </span></span>
<span><span class="co">#&gt; 5 85           3       Media anual      M</span></span>
<span><span class="co">#&gt; 6 86           3   Variación anual</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">varval</span>, <span class="va">Fk_Variable</span> <span class="op">==</span> <span class="fl">762</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;         Id Fk_Variable                             Nombre Codigo</span></span>
<span><span class="co">#&gt; 176 304092         762                     Índice general     00</span></span>
<span><span class="co">#&gt; 177 304093         762 Alimentos y bebidas no alcohólicas     01</span></span>
<span><span class="co">#&gt; 178 304094         762       Bebidas alcohólicas y tabaco     02</span></span>
<span><span class="co">#&gt; 179 304095         762                  Vestido y calzado     03</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>With this information we build the filter as follows.</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The filter is a list()</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"115"</span> <span class="op">=</span> <span class="st">"2"</span>,     <span class="co"># variable id = 115, value id = 2</span></span>
<span>               <span class="st">"3"</span> <span class="op">=</span> <span class="st">"74"</span> ,     <span class="co"># variable id = 3, value id = 74</span></span>
<span>               <span class="st">"762"</span> <span class="op">=</span> <span class="st">"304092"</span> <span class="co"># variable id = 762, value id = 304092</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_series_filter.html">get_data_series_filter</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, filter <span class="op">=</span> <span class="va">filter</span>, periodicity <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                              unnest <span class="op">=</span> <span class="cn">TRUE</span>, tip <span class="op">=</span> <span class="st">"A"</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ipc</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"T3_Periodo"</span>, <span class="st">"Anyo"</span>, <span class="st">"Valor"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                           Nombre T3_Periodo Anyo Valor</span></span>
<span><span class="co">#&gt; 1 Araba/Álava. Índice general. Variación anual.        may. 2025   2.4</span></span></code></pre></div>
<ul>
<li>A variable can take more than one value (valid to filter data from
tables as well).</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The filter is a list()</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"115"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2"</span> ,<span class="st">"3"</span>, <span class="st">"4"</span><span class="op">)</span>, <span class="co"># variable id = 115, values id 2, 3, 4</span></span>
<span>               <span class="st">"3"</span> <span class="op">=</span> <span class="st">"74"</span> ,              <span class="co"># variable id = 3, value id = 74</span></span>
<span>               <span class="st">"762"</span> <span class="op">=</span> <span class="st">"304092"</span>          <span class="co"># variable id = 762, value id = 304092</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_series_filter.html">get_data_series_filter</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, filter <span class="op">=</span> <span class="va">filter</span>, periodicity <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                              unnest <span class="op">=</span> <span class="cn">TRUE</span>, tip <span class="op">=</span> <span class="st">"A"</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ipc</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"T3_Periodo"</span>, <span class="st">"Anyo"</span>, <span class="st">"Valor"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                                Nombre T3_Periodo Anyo Valor</span></span>
<span><span class="co">#&gt; 1 Alicante/Alacant. Índice general. Variación anual.        may. 2025   1.9</span></span>
<span><span class="co">#&gt; 2         Albacete. Índice general. Variación anual.        may. 2025   1.7</span></span>
<span><span class="co">#&gt; 3      Araba/Álava. Índice general. Variación anual.        may. 2025   2.4</span></span></code></pre></div>
<ul>
<li>A variable can take a empty character <code>""</code> to get all its
possible values (valid to filter data from tables as well).</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The filter is a list()</span></span>
<span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"115"</span> <span class="op">=</span> <span class="st">""</span>,      <span class="co"># variable id = 115, all values</span></span>
<span>               <span class="st">"3"</span> <span class="op">=</span> <span class="st">"83"</span> ,     <span class="co"># variable id = 3, value id = 83</span></span>
<span>               <span class="st">"762"</span> <span class="op">=</span> <span class="st">"304092"</span> <span class="co"># variable id = 762, value id = 304092</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data using the filter</span></span>
<span><span class="va">ipc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_series_filter.html">get_data_series_filter</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"IPC"</span>, filter <span class="op">=</span> <span class="va">filter</span>, periodicity <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                              unnest <span class="op">=</span> <span class="cn">TRUE</span>, tip <span class="op">=</span> <span class="st">"A"</span>, validate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ipc</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"T3_Periodo"</span>, <span class="st">"Anyo"</span>, <span class="st">"Valor"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                              Nombre T3_Periodo Anyo   Valor</span></span>
<span><span class="co">#&gt; 1               Salamanca. Índice general. Índice.        may. 2025 119.414</span></span>
<span><span class="co">#&gt; 2                  Huelva. Índice general. Índice.        may. 2025 119.544</span></span>
<span><span class="co">#&gt; 3             Ciudad Real. Índice general. Índice.        may. 2025 119.467</span></span>
<span><span class="co">#&gt; 4        Alicante/Alacant. Índice general. Índice.        may. 2025 118.560</span></span>
<span><span class="co">#&gt; 5                 Ourense. Índice general. Índice.        may. 2025 119.219</span></span>
<span><span class="co">#&gt; 6  Santa Cruz de Tenerife. Índice general. Índice.        may. 2025 117.789</span></span>
<span><span class="co">#&gt; 7               Coruña, A. Índice general. Índice.        may. 2025 118.090</span></span>
<span><span class="co">#&gt; 8              Valladolid. Índice general. Índice.        may. 2025 118.442</span></span>
<span><span class="co">#&gt; 9                  Huesca. Índice general. Índice.        may. 2025 119.189</span></span>
<span><span class="co">#&gt; 10                  Cádiz. Índice general. Índice.        may. 2025 119.059</span></span>
<span><span class="co">#&gt; 11                 Málaga. Índice general. Índice.        may. 2025 120.251</span></span>
<span><span class="co">#&gt; 12                 Teruel. Índice general. Índice.        may. 2025 117.968</span></span>
<span><span class="co">#&gt; 13               Albacete. Índice general. Índice.        may. 2025 119.433</span></span>
<span><span class="co">#&gt; 14              Rioja, La. Índice general. Índice.        may. 2025 118.309</span></span>
<span><span class="co">#&gt; 15             Pontevedra. Índice general. Índice.        may. 2025 119.280</span></span>
<span><span class="co">#&gt; 16                Melilla. Índice general. Índice.        may. 2025 119.242</span></span>
<span><span class="co">#&gt; 17                 Cuenca. Índice general. Índice.        may. 2025 118.788</span></span>
<span><span class="co">#&gt; 18                 Toledo. Índice general. Índice.        may. 2025 120.328</span></span>
<span><span class="co">#&gt; 19                Córdoba. Índice general. Índice.        may. 2025 119.032</span></span>
<span><span class="co">#&gt; 20                  Ceuta. Índice general. Índice.        may. 2025 118.805</span></span>
<span><span class="co">#&gt; 21                Granada. Índice general. Índice.        may. 2025 118.560</span></span>
<span><span class="co">#&gt; 22                  Ávila. Índice general. Índice.        may. 2025 119.612</span></span>
<span><span class="co">#&gt; 23              Tarragona. Índice general. Índice.        may. 2025 117.533</span></span>
<span><span class="co">#&gt; 24                  Soria. Índice general. Índice.        may. 2025 117.921</span></span>
<span><span class="co">#&gt; 25      Valencia/València. Índice general. Índice.        may. 2025 117.851</span></span>
<span><span class="co">#&gt; 26            Guadalajara. Índice general. Índice.        may. 2025 119.517</span></span>
<span><span class="co">#&gt; 27                 Burgos. Índice general. Índice.        may. 2025 117.926</span></span>
<span><span class="co">#&gt; 28                   Lugo. Índice general. Índice.        may. 2025 119.251</span></span>
<span><span class="co">#&gt; 29               Gipuzkoa. Índice general. Índice.        may. 2025 118.530</span></span>
<span><span class="co">#&gt; 30                Almería. Índice general. Índice.        may. 2025 117.253</span></span>
<span><span class="co">#&gt; 31                 Girona. Índice general. Índice.        may. 2025 118.051</span></span>
<span><span class="co">#&gt; 32                 Lleida. Índice general. Índice.        may. 2025 119.487</span></span>
<span><span class="co">#&gt; 33               Zaragoza. Índice general. Índice.        may. 2025 118.007</span></span>
<span><span class="co">#&gt; 34                 Zamora. Índice general. Índice.        may. 2025 119.617</span></span>
<span><span class="co">#&gt; 35     Castellón/Castelló. Índice general. Índice.        may. 2025 120.195</span></span>
<span><span class="co">#&gt; 36                   Jaén. Índice general. Índice.        may. 2025 118.972</span></span>
<span><span class="co">#&gt; 37               Asturias. Índice general. Índice.        may. 2025 117.974</span></span>
<span><span class="co">#&gt; 38            Araba/Álava. Índice general. Índice.        may. 2025 117.634</span></span>
<span><span class="co">#&gt; 39                Badajoz. Índice general. Índice.        may. 2025 119.749</span></span>
<span><span class="co">#&gt; 40                 Madrid. Índice general. Índice.        may. 2025 116.476</span></span>
<span><span class="co">#&gt; 41                Bizkaia. Índice general. Índice.        may. 2025 119.011</span></span>
<span><span class="co">#&gt; 42              Cantabria. Índice general. Índice.        may. 2025 117.559</span></span>
<span><span class="co">#&gt; 43            Palmas, Las. Índice general. Índice.        may. 2025 117.577</span></span>
<span><span class="co">#&gt; 44                Segovia. Índice general. Índice.        may. 2025 118.631</span></span>
<span><span class="co">#&gt; 45               Palencia. Índice general. Índice.        may. 2025 118.108</span></span>
<span><span class="co">#&gt; 46                Sevilla. Índice general. Índice.        may. 2025 118.556</span></span>
<span><span class="co">#&gt; 47                   León. Índice general. Índice.        may. 2025 120.353</span></span>
<span><span class="co">#&gt; 48         Balears, Illes. Índice general. Índice.        may. 2025 118.830</span></span>
<span><span class="co">#&gt; 49              Barcelona. Índice general. Índice.        may. 2025 117.027</span></span>
<span><span class="co">#&gt; 50                Navarra. Índice general. Índice.        may. 2025 118.360</span></span>
<span><span class="co">#&gt; 51                Cáceres. Índice general. Índice.        may. 2025 117.332</span></span>
<span><span class="co">#&gt; 52                 Murcia. Índice general. Índice.        may. 2025 118.147</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Crespo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
